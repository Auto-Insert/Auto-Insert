<Page x:Class="AutoInsert.UI.Pages.CreateSequencePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
      xmlns:local="clr-namespace:AutoInsert.UI.Pages"
      xmlns:models="clr-namespace:AutoInsert.Shared.Models;assembly=AutoInsert.Shared"
      Title="Create Sequence"
      ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
      ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
      Foreground="{DynamicResource TextFillColorPrimaryBrush}">
    <Grid>
        <StackPanel Margin="40,20">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <ui:Button Content="Back"
                        Width="100"
                        Height="32"
                        HorizontalAlignment="Left"
                        Click="BackButton_Click"
                        Margin="0,0,16,0"/>
                <TextBlock Text="Create Sequence"
                           FontSize="32"
                           FontWeight="Bold"
                           VerticalAlignment="Center"/>
            </StackPanel>
            <!-- Metadata section -->
            <TextBlock Text="Metadata"
                FontSize="24"
                FontWeight="Bold"
                VerticalAlignment="Center"/>
            <ui:Card Margin="18,18,0,0">
                <StackPanel>
                    <TextBlock Text="Name" FontWeight="SemiBold" FontSize="16" Margin="0,0,0,4"/>
                    <TextBox x:Name="NameTextBox" FontSize="14" Margin="0,0,0,8"/>
                    <TextBlock Text="Description" FontWeight="SemiBold" FontSize="16" Margin="0,12,0,4"/>
                    <TextBox x:Name="DescriptionTextBox" FontSize="14" Margin="0,0,0,8"/>
                </StackPanel>
            </ui:Card>
            <!-- Add steps section -->
            <TextBlock Text="Steps"
                FontSize="24"
                FontWeight="Bold"
                VerticalAlignment="Center"/>
            <ui:Card Margin="18,18,0,0">
                <StackPanel>
                    <TextBlock Text="Step Type" FontWeight="SemiBold" FontSize="16" Margin="0,0,0,4"/>
                    <Grid VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ComboBox
                            Grid.Column="0"
                            ItemsSource="{Binding StepTypes}"
                            SelectedItem="{Binding SelectedStepType, Mode=TwoWay}"
                            FontSize="14"
                            Margin="0,0,0,8"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Center"/>
                        <ui:Button Grid.Column="1"
                                Content="Add Step"
                                Width="100"
                                Height="32"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Click="AddStepButton_Click"
                                Margin="8,0,0,0"/>
                    </Grid>

                    <!-- List of currently added steps -->
                    <TextBlock Text="Steps:" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,4"/>
                    <ItemsControl ItemsSource="{Binding Steps}">
                        <ItemsControl.Resources>
                            <DataTemplate DataType="{x:Type models:MoveURToPositionStep}">
                                <Border Margin="0,4,0,4" Padding="8" Background="{DynamicResource CardBackgroundBrush}" CornerRadius="6">
                                    <StackPanel>
                                        <TextBlock Text="Move UR To Position Step" FontWeight="Bold" FontSize="14"/>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Speed:" Margin="0,0,8,0"/>
                                            <TextBox Text="{Binding Speed, Mode=TwoWay}" Width="60" Margin="0,0,8,0"/>
                                            <TextBlock Text="Acceleration:" Margin="0,0,8,0"/>
                                            <TextBox Text="{Binding Acceleration, Mode=TwoWay}" Width="60" Margin="0,0,8,0"/>
                                            <TextBlock Text="Grip Part:" Margin="0,0,8,0"/>
                                            <CheckBox IsChecked="{Binding GripPart, Mode=TwoWay}"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                            <DataTemplate DataType="{x:Type models:SetScrewdriverExtensionStep}">
                                <Border Margin="0,4,0,4" Padding="8" Background="{DynamicResource CardBackgroundBrush}" CornerRadius="6">
                                    <StackPanel>
                                        <TextBlock Text="Set Screwdriver Extension Step" FontWeight="Bold" FontSize="14"/>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Percentage:" Margin="0,0,8,0"/>
                                            <TextBox Text="{Binding Percentage, Mode=TwoWay}" Width="60"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.Resources>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="0,4,0,4" Padding="8" Background="{DynamicResource CardBackgroundBrush}" CornerRadius="6">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding Name}" FontWeight="Bold" FontSize="14"/>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    
                </StackPanel>
            </ui:Card>
        </StackPanel>
    </Grid>
</Page>
